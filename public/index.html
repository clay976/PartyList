<!DOCTYPE html>
<html>
<head>
    <title>Party List</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3-theme-red.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  </head>

<!-- Side Navigation -->
<nav class="w3-sidenav w3-white w3-card-2 w3-animate-left" style="display:none" id="mySidenav">
  <h1 class="w3-xxxlarge w3-text-teal">Side Navigation</h1>
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-closenav w3-xxxlarge w3-text-theme">Close <i class="fa fa-remove"></i></a>
  <a href="javascript:void(0)">Link 1</a>
  <a href="javascript:void(0)">Link 2</a>
  <a href="javascript:void(0)">Link 3</a>
  <a href="javascript:void(0)">Link 4</a>
  <a href="javascript:void(0)">Link 5</a>
</nav>
  <div id="login">
    <!-- Header -->
    <header class="w3-container w3-theme w3-padding" id="myHeader">
      <div class="w3-center">
      <h4>Let everyone be the DJ and take the hassle out of creating playlists</h4>
      <h1 class="w3-xxxlarge w3-animate-bottom">Party List</h1>
        <div class="w3-padding-32">
          <a class="w3-btn" href="/login">Login</a>
        </div>
      </div>
    </header>

    <div class="w3-half">
    <div class="w3-row-padding w3-center w3-margin-top">
      <h4>hosts</h4><br>
      <div class="w3-card-2 w3-padding-top" style="min-height:400px">
      <i class="fa fa-desktop w3-margin-bottom w3-text-theme" style="font-size:120px"></i>
      <p>1. Create or choose your playlist</p>
      <p>2. Choose your guests or make it public</p>
      <p>3. Message your guests to let them know</p>
      <p>4. Watch your playlist build as requested</p>
      </div>
    </div>
    </div>

    <div class="w3-half">
    <div class="w3-row-padding w3-center w3-margin-top">
      <h4>Guests</h4><br>
      <div class="w3-card-2 w3-padding-top" style="min-height:400px">
      <i class="fa fa-css3 w3-margin-bottom w3-text-theme" style="font-size:120px"></i>
      <p>1. Add yourself or get added to a playlist   </p>
      <p>2. Request in the format "starboy the Weeknd"</p>
      <p>3. Confirm your request after it is found    </p>
      <p>4. Follow the playlist on spotify!           </p>
      </div>
    </div>
    </div>
  </div>

  <div id="loggedin">
    <div class="w3-third">
    <div class="w3-row-padding w3-center w3-margin-top">
      <h4>Playlists</h4><br>
      <div class="w3-card-2 w3-padding-top" style="min-height:400px">
      <i class="fa fa-desktop w3-margin-bottom w3-text-theme" style="font-size:120px"></i>
      <form id="input" action="/playlist/explicit" method="POST">
        <input id='hostID1' type='text' name ='hostID'> 
        <input type="hidden" name="explicit" value= "true">
        <input type="submit" value="set explicit">
      </form>
      <form id="input" action="/playlist/explicit" method="POST">
        <input id='hostID2' type='text' name ='hostID'>
        <input type="hidden" name="explicit" value= "false">
        <input type="submit" value="set clean">
      </form>
      <form id="input" action="/playlist/spotify/create" method="POST">
        <input id='hostID3' type='text' name ='hostID'>
        <input type="text" name="playName" placeholder="new playlist Name">
        <input type="submit" value="create">
      </form>
      <form id="input" action="/playlist/spotify/latest" method="POST">
        <input id='hostID4' type='text' name ='hostID'>
        <input type="submit" value="find latest spotify playlist">
      </form>
      <form id="input" action="/playlist/spotify/getAll" method="POST">
        <input id='hostID5' type='text' name ='hostID'>
        <input type="submit" value="retreive all spotify playlists in a list">
      </form>
      <form id="input" action="/playlist/spotify/set" method="POST">
        <input id='hostID6' type='text' name ='hostID'>
        <input type="text" name="playlistID" placeholder="playlist ID">
        <input type="submit" value="set specific spotify playlist">
      </form>
      <form id="input" action="/playlist/requestThreshold" method="POST">
        <input id='hostID10' type='text' name ='hostID'>
        <input type="number" name="requests" placeholder="Requests to add a song to a playlist">
        <input type="submit" value="set request threshold">
      </form>
      </div>
    </div>
    </div>

    <div class="w3-third">
    <div class="w3-row-padding w3-center w3-margin-top">
      <h4>Songs</h4><br>
      <div class="w3-card-2 w3-padding-top" style="min-height:400px">
      <i class="fa fa-desktop w3-margin-bottom w3-text-theme" style="font-size:120px"></i>
      <form id="input" action="/songs/removeAll" method="POST">
        <input id='hostID7' type='text' name ='hostID'>
        <input type="submit" value="reset song requests">
      </form>
      </div>
    </div>
    </div>

    <div class="w3-third">
    <div class="w3-row-padding w3-center w3-margin-top">
      <h4>Guests</h4><br>
      <div class="w3-card-2 w3-padding-top" style="min-height:400px">
      <i class="fa fa-desktop w3-margin-bottom w3-text-theme" style="font-size:120px"></i>
      <form id="input" action="/guests/removeAll" method="POST">
        <input type="submit" value="Remove All Guests">
      </form>
      <form id="input" action="/guests/add" method="POST">
        <input id='hostID8' type='text' name ='hostID'>
        <input type="text" name="guestNum" placeholder="ex. 9055554260">
        <input type="submit" value="add">
      </form>
      <form id="input" action="/guests/remove" method="POST">
        <input id='hostID9' type='text' name ='hostID'>
        <input type="text" name="guestNum" placeholder="ex. 9055554260">
        <input type="submit" value="remove">
      </form>
      </div>
    </div>
    </div>
  </div>

<script>

  document.getElementById('login').style.visibility = 'visible'
  /**
   * Obtains parameters from the hash of the URL
   * @return Object
   */
  function getHashParams() {
    var hashParams = {}
    var e, r = /([^&=]+)=?([^&]*)/g,
        q = window.location.hash.substring(1)
    while ( e = r.exec(q)) {
       hashParams[e[1]] = decodeURIComponent(e[2])
    }
    return hashParams
  }
  var params = getHashParams()
  var access_token = params.access_token,
      refresh_token = params.refresh_token,
      error = params.error
  if (error) {
    alert('There was an error during the authentication')
  } else {
    if (access_token) {
      document.getElementById('login').style.visibility = 'hidden'
      document.getElementById('loggedin').style.visibility = 'visible'
      document.getElementById('hostID1').value = params.hostID;
      document.getElementById('hostID2').value = params.hostID;
      document.getElementById('hostID3').value = params.hostID;
      document.getElementById('hostID4').value = params.hostID;
      document.getElementById('hostID5').value = params.hostID;
      document.getElementById('hostID6').value = params.hostID;
      document.getElementById('hostID7').value = params.hostID;
      document.getElementById('hostID8').value = params.hostID;
      document.getElementById('hostID9').value = params.hostID;
      document.getElementById('hostID10').value = params.hostID;

    } else {
      document.getElementById('login').style.visibility = 'visible'
      document.getElementById('loggedin').style.visibility = 'hidden'
    }
  }


</script>